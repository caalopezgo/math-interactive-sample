<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Series de Fourier - Dibujando con C√≠rculos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem;
            color: #fff;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 1.5rem;
            max-width: 1100px;
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 0.5rem;
            font-size: 2rem;
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            text-align: center;
            margin-bottom: 1.5rem;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95rem;
        }
        
        .canvas-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 0;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        canvas {
            display: block;
            width: 100%;
            border-radius: 15px;
        }
        
        .wave-selector {
            display: flex;
            gap: 0.8rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }
        
        .wave-btn {
            padding: 0.7rem 1.5rem;
            border: 2px solid rgba(0, 210, 255, 0.3);
            background: rgba(0, 210, 255, 0.1);
            color: #00d2ff;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .wave-btn:hover {
            background: rgba(0, 210, 255, 0.2);
            border-color: rgba(0, 210, 255, 0.5);
        }
        
        .wave-btn.active {
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            color: #fff;
            border-color: transparent;
        }
        
        .controls-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .control-group {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.2rem;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .control-group h3 {
            color: #00d2ff;
            margin-bottom: 0.8rem;
            font-size: 1rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.4rem;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            -webkit-appearance: none;
            margin-bottom: 0.5rem;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 210, 255, 0.4);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            cursor: pointer;
            border: none;
        }
        
        .value-display {
            font-family: 'Courier New', monospace;
            color: #00d2ff;
            font-size: 0.9rem;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #00d2ff;
        }
        
        .checkbox-group label {
            margin: 0;
            cursor: pointer;
        }
        
        .action-buttons {
            display: flex;
            gap: 0.8rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }
        
        button {
            padding: 0.7rem 1.5rem;
            border: none;
            border-radius: 25px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            color: #fff;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 210, 255, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .equation-panel {
            background: rgba(0, 0, 0, 0.3);
            padding: 1.2rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .equation-panel h4 {
            color: #00d2ff;
            margin-bottom: 0.8rem;
        }
        
        .equation {
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            color: #fff;
            overflow-x: auto;
            white-space: nowrap;
            padding: 0.5rem;
        }
        
        .info-panel {
            background: rgba(0, 210, 255, 0.1);
            padding: 1.2rem;
            border-radius: 12px;
            border-left: 4px solid #00d2ff;
        }
        
        .info-panel h4 {
            color: #00d2ff;
            margin-bottom: 0.5rem;
        }
        
        .info-panel p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .controls-panel {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 1rem;
            }
            
            .wave-selector {
                gap: 0.5rem;
            }
            
            .wave-btn {
                padding: 0.5rem 1rem;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚≠ï Series de Fourier - Dibujando con C√≠rculos</h1>
        <p class="subtitle">Observa c√≥mo c√≠rculos giratorios (epiciclos) crean formas complejas</p>
        
        <div class="wave-selector">
            <button class="wave-btn active" data-wave="square">Onda Cuadrada</button>
            <button class="wave-btn" data-wave="sawtooth">Diente de Sierra</button>
            <button class="wave-btn" data-wave="triangle">Onda Triangular</button>
            <button class="wave-btn" data-wave="pulse">Pulso</button>
        </div>
        
        <div class="canvas-container">
            <canvas id="canvas" width="900" height="500"></canvas>
        </div>
        
        <div class="equation-panel">
            <h4>üìê Ecuaci√≥n de Fourier</h4>
            <div class="equation" id="equation">
                f(t) = Œ£ (4/œÄn) ¬∑ sin(n¬∑œâ¬∑t) para n = 1, 3, 5, ...
            </div>
        </div>
        
        <div class="controls-panel">
            <div class="control-group">
                <h3>üî¢ N√∫mero de C√≠rculos</h3>
                <label>M√°s c√≠rculos = mejor aproximaci√≥n</label>
                <input type="range" id="numCircles" min="1" max="50" step="1" value="5">
                <div class="value-display">Valor: <span id="numCircles-value">5</span></div>
            </div>
            
            <div class="control-group">
                <h3>‚è±Ô∏è Velocidad</h3>
                <label>Velocidad de rotaci√≥n</label>
                <input type="range" id="speed" min="0.1" max="3" step="0.1" value="1">
                <div class="value-display">Valor: <span id="speed-value">1.0</span>x</div>
            </div>
            
            <div class="control-group">
                <h3>üìè Escala</h3>
                <label>Tama√±o de los c√≠rculos</label>
                <input type="range" id="scale" min="50" max="150" step="5" value="80">
                <div class="value-display">Valor: <span id="scale-value">80</span></div>
            </div>
            
            <div class="control-group">
                <h3>üé® Visualizaci√≥n</h3>
                <div class="checkbox-group">
                    <input type="checkbox" id="showCircles" checked>
                    <label for="showCircles">Mostrar c√≠rculos</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="showRadii" checked>
                    <label for="showRadii">Mostrar radios</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="showWave" checked>
                    <label for="showWave">Mostrar onda</label>
                </div>
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="btn-primary" id="playPauseBtn">‚è∏ Pausar</button>
            <button class="btn-secondary" id="clearBtn">üîÑ Reiniciar</button>
        </div>
        
        <div class="info-panel">
            <h4>üí° ¬øQu√© son las Series de Fourier?</h4>
            <p>
                Joseph Fourier descubri√≥ que cualquier forma peri√≥dica puede representarse como una suma de ondas 
                sinusoidales simples. Cada c√≠rculo giratorio representa un "arm√≥nico" - una onda seno con una 
                frecuencia espec√≠fica. Al sumar m√°s arm√≥nicos, la aproximaci√≥n mejora. Esto es fundamental en 
                procesamiento de se√±ales, m√∫sica, y comunicaciones.
            </p>
        </div>
    </div>

    <script>
        class FourierCircles {
            constructor() {
                this.canvas = document.getElementById('canvas');
                this.ctx = this.canvas.getContext('2d');
                
                this.resizeCanvas();
                window.addEventListener('resize', () => this.resizeCanvas());
                
                // Estado
                this.time = 0;
                this.isPaused = false;
                this.waveType = 'square';
                this.numCircles = 5;
                this.speed = 1;
                this.scale = 80;
                this.showCircles = true;
                this.showRadii = true;
                this.showWave = true;
                
                // Puntos de la onda dibujada
                this.wave = [];
                this.maxWavePoints = 800;
                
                // Configurar eventos
                this.setupEventListeners();
                
                // Iniciar animaci√≥n
                this.animate();
            }
            
            resizeCanvas() {
                const container = this.canvas.parentElement;
                this.canvas.width = container.clientWidth;
                this.canvas.height = 500;
            }
            
            setupEventListeners() {
                // Selector de onda
                document.querySelectorAll('.wave-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.wave-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.waveType = btn.dataset.wave;
                        this.wave = [];
                        this.updateEquation();
                    });
                });
                
                // Controles
                document.getElementById('numCircles').addEventListener('input', (e) => {
                    this.numCircles = parseInt(e.target.value);
                    document.getElementById('numCircles-value').textContent = this.numCircles;
                    this.wave = [];
                    this.updateEquation();
                });
                
                document.getElementById('speed').addEventListener('input', (e) => {
                    this.speed = parseFloat(e.target.value);
                    document.getElementById('speed-value').textContent = this.speed.toFixed(1);
                });
                
                document.getElementById('scale').addEventListener('input', (e) => {
                    this.scale = parseInt(e.target.value);
                    document.getElementById('scale-value').textContent = this.scale;
                    this.wave = [];
                });
                
                document.getElementById('showCircles').addEventListener('change', (e) => {
                    this.showCircles = e.target.checked;
                });
                
                document.getElementById('showRadii').addEventListener('change', (e) => {
                    this.showRadii = e.target.checked;
                });
                
                document.getElementById('showWave').addEventListener('change', (e) => {
                    this.showWave = e.target.checked;
                });
                
                // Botones
                document.getElementById('playPauseBtn').addEventListener('click', () => {
                    this.isPaused = !this.isPaused;
                    document.getElementById('playPauseBtn').textContent = 
                        this.isPaused ? '‚ñ∂ Reanudar' : '‚è∏ Pausar';
                });
                
                document.getElementById('clearBtn').addEventListener('click', () => {
                    this.wave = [];
                    this.time = 0;
                });
                
                // Actualizar ecuaci√≥n inicial
                this.updateEquation();
            }
            
            updateEquation() {
                const eqElement = document.getElementById('equation');
                
                switch (this.waveType) {
                    case 'square':
                        eqElement.textContent = `f(t) = (4/œÄ) ¬∑ Œ£ [sin(n¬∑œâ¬∑t)/n] para n = 1, 3, 5, ... (${this.numCircles} t√©rminos)`;
                        break;
                    case 'sawtooth':
                        eqElement.textContent = `f(t) = (2/œÄ) ¬∑ Œ£ [(-1)^(n+1) ¬∑ sin(n¬∑œâ¬∑t)/n] para n = 1, 2, 3, ... (${this.numCircles} t√©rminos)`;
                        break;
                    case 'triangle':
                        eqElement.textContent = `f(t) = (8/œÄ¬≤) ¬∑ Œ£ [(-1)^k ¬∑ sin(n¬∑œâ¬∑t)/n¬≤] para n = 1, 3, 5, ... (${this.numCircles} t√©rminos)`;
                        break;
                    case 'pulse':
                        eqElement.textContent = `f(t) = Œ£ [sin(n¬∑œâ¬∑t)/n] con duty cycle 25% (${this.numCircles} t√©rminos)`;
                        break;
                }
            }
            
            // Coeficientes de Fourier para diferentes ondas
            getFourierCoefficients(n) {
                switch (this.waveType) {
                    case 'square':
                        // Onda cuadrada: solo arm√≥nicos impares
                        const nOdd = 2 * n - 1;
                        return {
                            frequency: nOdd,
                            amplitude: (4 / (Math.PI * nOdd)) * this.scale
                        };
                    
                    case 'sawtooth':
                        // Diente de sierra: todos los arm√≥nicos
                        return {
                            frequency: n,
                            amplitude: (2 / (Math.PI * n)) * Math.pow(-1, n + 1) * this.scale
                        };
                    
                    case 'triangle':
                        // Onda triangular: solo arm√≥nicos impares
                        const nOddTri = 2 * n - 1;
                        const sign = Math.pow(-1, n - 1);
                        return {
                            frequency: nOddTri,
                            amplitude: (8 / (Math.PI * Math.PI * nOddTri * nOddTri)) * sign * this.scale
                        };
                    
                    case 'pulse':
                        // Pulso (duty cycle 25%)
                        const duty = 0.25;
                        return {
                            frequency: n,
                            amplitude: (2 * Math.sin(n * Math.PI * duty) / (n * Math.PI)) * this.scale * 2
                        };
                    
                    default:
                        return { frequency: n, amplitude: this.scale / n };
                }
            }
            
            draw() {
                const width = this.canvas.width;
                const height = this.canvas.height;
                const ctx = this.ctx;
                
                // Limpiar canvas
                ctx.fillStyle = 'rgba(15, 12, 41, 1)';
                ctx.fillRect(0, 0, width, height);
                
                // Posici√≥n inicial de los c√≠rculos
                let x = width * 0.25;
                let y = height / 2;
                
                // Dibujar los c√≠rculos de Fourier
                for (let i = 1; i <= this.numCircles; i++) {
                    const { frequency, amplitude } = this.getFourierCoefficients(i);
                    const prevX = x;
                    const prevY = y;
                    
                    // Nueva posici√≥n
                    x += amplitude * Math.cos(frequency * this.time);
                    y += amplitude * Math.sin(frequency * this.time);
                    
                    // Dibujar c√≠rculo
                    if (this.showCircles) {
                        ctx.beginPath();
                        ctx.arc(prevX, prevY, Math.abs(amplitude), 0, Math.PI * 2);
                        ctx.strokeStyle = `rgba(0, 210, 255, ${0.3 + 0.5 * (1 - i / this.numCircles)})`;
                        ctx.lineWidth = 1;
                        ctx.stroke();
                    }
                    
                    // Dibujar radio
                    if (this.showRadii) {
                        ctx.beginPath();
                        ctx.moveTo(prevX, prevY);
                        ctx.lineTo(x, y);
                        ctx.strokeStyle = `rgba(58, 123, 213, ${0.5 + 0.5 * (1 - i / this.numCircles)})`;
                        ctx.lineWidth = 2;
                        ctx.stroke();
                    }
                }
                
                // Punto final (punta del "l√°piz")
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fillStyle = '#ff6b6b';
                ctx.fill();
                
                // Efecto de brillo en el punto
                const glowGradient = ctx.createRadialGradient(x, y, 0, x, y, 15);
                glowGradient.addColorStop(0, 'rgba(255, 107, 107, 0.6)');
                glowGradient.addColorStop(1, 'transparent');
                ctx.beginPath();
                ctx.arc(x, y, 15, 0, Math.PI * 2);
                ctx.fillStyle = glowGradient;
                ctx.fill();
                
                // Agregar punto a la onda
                this.wave.unshift({ x: width * 0.5, y: y });
                if (this.wave.length > this.maxWavePoints) {
                    this.wave.pop();
                }
                
                // L√≠nea conectora del punto a la onda
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(width * 0.5, y);
                ctx.strokeStyle = 'rgba(255, 107, 107, 0.4)';
                ctx.lineWidth = 1;
                ctx.setLineDash([5, 5]);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Dibujar la onda resultante
                if (this.showWave && this.wave.length > 1) {
                    ctx.beginPath();
                    ctx.moveTo(this.wave[0].x, this.wave[0].y);
                    
                    for (let i = 1; i < this.wave.length; i++) {
                        // Desplazar la onda hacia la derecha
                        const waveX = this.wave[i].x + i * 0.8;
                        if (waveX < width) {
                            ctx.lineTo(waveX, this.wave[i].y);
                        }
                    }
                    
                    ctx.strokeStyle = '#00d2ff';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
                
                // Dibujar eje de la onda
                ctx.beginPath();
                ctx.moveTo(width * 0.5, 50);
                ctx.lineTo(width * 0.5, height - 50);
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                ctx.lineWidth = 1;
                ctx.stroke();
                
                // Etiquetas
                ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.font = '12px Inter';
                ctx.fillText('Epiciclos', 30, 30);
                ctx.fillText('Onda resultante ‚Üí', width * 0.5 + 10, 30);
            }
            
            animate() {
                if (!this.isPaused) {
                    this.time += 0.02 * this.speed;
                }
                
                this.draw();
                requestAnimationFrame(() => this.animate());
            }
        }
        
        // Inicializar cuando se carga la p√°gina
        window.addEventListener('DOMContentLoaded', () => {
            new FourierCircles();
        });
    </script>
</body>
</html>



